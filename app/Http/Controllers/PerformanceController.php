<?phpnamespace App\Http\Controllers;use Illuminate\Http\Request;use App\Model\Customer;use DB;use Session;use Mail;use App\Jobs\SendEmailJob;use Carbon\Carbon;use Illuminate\Http\UploadedFile;class PerformanceController  extends Controller{       public function __construct(){        // there are only function allow same auth 					$this->middleware(SuperAgency::class, ['except' => ['index']]);			$this->middleware(SuperCustomer::class, ['except' => ['index']]);				}	public function index(Request $request,$id=null){		$title = "Performance";        		$data = compact('title');		$profile_ads = DB::table('profile_ads')		->where('id', $id)					->select('id','first_name','profile_pic','category','province','population','telephone','created_at','title')		->first();							///visualizaciones		$visualizaciones = DB::table('visualizaciones')		->where('profile_id', $id)							->count();		$visualizaciones30Days = DB::table('visualizaciones')		->where('created_at', '>=', Carbon::now()->subDays(30))		->where('profile_id', $id)							->count();		// there are get 					///visualizaciones		$piesepuerto = DB::table('top_subida_profile_lists')		->where('profile_ads_id', $id)							->sum('price');		$piesepuerto30Days = DB::table('top_subida_profile_lists')		//->where('created_at', '>=', Carbon::now()->subDays(30))		->where('profile_ads_id', $id)							->sum('price');		// there are get 						$TopAnuncioTotalCount = DB::table('visualizaciones')		->where('profile_id', $id)							->where('type', 'top')							->count();		$AutoSubidaCount = DB::table('visualizaciones')		->where('profile_id', $id)							->where('type', 'subida')							->count();				return view('front.performance.index',['id'=>$id,		'ads'=>$profile_ads,		'visualizaciones'=>$visualizaciones,		'visualizaciones30Days'=>$visualizaciones30Days,		'TopAnuncioTotalCount'=>$TopAnuncioTotalCount,		'AutoSubidaCount'=>$AutoSubidaCount,		'piesepuerto'=>$piesepuerto,		'piesepuerto30Days'=>$piesepuerto30Days,		],$data); 	}		}